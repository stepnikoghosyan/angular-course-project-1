<app-loading *ngIf="isLoading"></app-loading>
<div class="main">
<div class="card">
    <div >
        <h1>{{title}} Post</h1>
    </div>
    <form class="postForm" [formGroup]='formGroup'>
        <div class="inputForm">
            <div>
                <div class="label">
                    <label>Title</label>
                </div>
                <input class="title" formControlName="title" type="text">
                <div class="formErr">
                    <div  *ngIf='formGroup.controls["title"].invalid && formGroup.controls["title"].touched'>
                        <span *ngIf="formGroup.controls['title'].hasError('required')" class="errors">
                            Required
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="inputForm">
            <div class="label">
                <label>Body</label>
            </div>
            <textarea class="title" formControlName="body" rows="10px" cols="100px"></textarea>
            <div class="formErr">
                <div *ngIf='formGroup.controls["body"].invalid && formGroup.controls["body"].touched'>
                    <span  *ngIf="formGroup.controls['body'].hasError('required')" class="errors">
                        Required
                    </span>
                </div>
            </div>
        </div>

        <div>
            <!-- accept=".jpg, .jpeg, .png" -->
            <input class="inputBtn" type="file" id="img" formControlName="file"
             #file (change)="handler($event)">
                

            <button class="upload" (click)='trigger(file)'>select file</button>
            <div class="formErr">
                <p class="errors" *ngIf = "formGroup.controls['file'].errors && !formGroup.controls['file'].pristine">
                
                    Please upload JPEG, JPG or PNG files
                </p>
                <p class="errors"  *ngIf = "formGroup.controls['file'].errors && !formGroup.controls['file'].pristine">
                    'ile size should not be more than 2mb
                </p>
           
            </div>

            <div class="file-delete">
                <p *ngIf='!formGroup.controls["file"].errors'>
                    {{fileName }}
                    <span  class="delete" (click)="deleteImg()">
                        <fa-icon class="xmark" [icon]="faCircleXmark"></fa-icon>
                    </span>
                </p>
            </div>
        </div>
        <div class="create">
            <button *ngIf="!id else update" class="btn" (click)="create()">Create</button>
            <ng-template #update>
                <button class="btn" (click)="save()">Save</button>
            </ng-template>
        </div>
      
    </form>

</div>
</div>